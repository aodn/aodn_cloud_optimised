{
  "dataset_name": "mooring_acidification_realtime_qc",
  "logger_name": "mooring_acidification_realtime_qc",
  "cloud_optimised_format": "parquet",
  "run_settings": {
    "paths": [
      {
        "s3_uri": "s3://imos-data/IMOS/ANMN/AM/",
        "filter": [
          ".*\\/CO2\\/realtime\\/.*_FV0[0-1]_.*\\.nc"
        ],
        "year_range": []
      }
    ],
    "cluster": {
      "mode": "local",
      "restart_every_path": false
    },
    "clear_existing_data": true,
    "raise_error": false,
    "coiled_cluster_options": {
      "n_workers": [
        1,
        20
      ],
      "scheduler_vm_types": "m7i-flex.large",
      "worker_vm_types": "m7i-flex.large",
      "allow_ingress_from": "me",
      "compute_purchase_option": "spot_with_fallback",
      "worker_options": {
        "nthreads": 4,
        "memory_limit": "8GB"
      }
    },
    "batch_size": 5,
    "force_previous_parquet_deletion": false
  },
  "metadata_uuid": "4d3d4aca-472e-4616-88a5-df0f5ab401ba",
  "schema": {
    "TIME": {
      "type": "timestamp[ns]",
      "standard_name": "time",
      "long_name": "time",
      "valid_min": 0.0,
      "valid_max": 90000.0,
      "axis": "T"
    },
    "LATITUDE": {
      "type": "double",
      "standard_name": "latitude",
      "long_name": "latitude",
      "units": "degrees_north",
      "valid_min": -90.0,
      "valid_max": 90.0,
      "axis": "Y",
      "reference_datum": "geographical coordinates, WGS84 projection"
    },
    "LONGITUDE": {
      "type": "double",
      "standard_name": "longitude",
      "long_name": "longitude",
      "units": "degrees_east",
      "valid_min": -180.0,
      "valid_max": 180.0,
      "axis": "X",
      "reference_datum": "geographical coordinates, WGS84 projection"
    },
    "XCO2_WATER": {
      "type": "float",
      "long_name": "mole_fraction_of_carbon_dioxide_in_sea_water",
      "units": "ppm",
      "ancillary_variables": "XCO2_WATER_standard_deviation"
    },
    "XCO2_WATER_standard_deviation": {
      "type": "double",
      "long_name": "mole_fraction_of_carbon_dioxide_in_sea_water standard_deviation",
      "units": "ppm"
    },
    "XCO2_AIR": {
      "type": "float",
      "standard_name": "mole_fraction_of_carbon_dioxide_in_air",
      "long_name": "mole_fraction_of_carbon_dioxide_in_air",
      "units": "ppm",
      "ancillary_variables": "XCO2_AIR_standard_deviation"
    },
    "XCO2_AIR_standard_deviation": {
      "type": "double",
      "long_name": "mole_fraction_of_carbon_dioxide_in_air standard_deviation",
      "units": "ppm"
    },
    "SSTI": {
      "type": "float",
      "standard_name": "sea_surface_temperature",
      "long_name": "sea_surface_temperature",
      "units": "Celsius",
      "valid_min": -2.5,
      "valid_max": 40.0
    },
    "SSS": {
      "type": "float",
      "standard_name": "sea_surface_salinity",
      "long_name": "sea_surface_salinity",
      "units": "1e-3",
      "valid_min": 2.0,
      "valid_max": 41.0
    }
  },
  "aws_opendata_registry": {
    "Name": "National Mooring Network - Acidification - Real time",
    "Description": "This collection delivers in near real-time measurements of surface CO2 at three of the National Reference Stations operated by the National Mooring Network Facility (formerly known as the Australian National Mooring Network (ANMN)), and one site located adjacent to the Heron Island reef slope, in the Wistari channel on the Great Barrier Reef. The observations include CO2 concentration in air and water, surface water temperature and salinity. These data are based on pre-deployment calibrations and are automatically flagged using range checking, individual instrument error returns, and subsequent error propagation for the calculated parameters. The Acidification Moorings sub-facility is responsible for building an ocean carbon and acidification monitoring network for Australian waters. These moorings provide key observations to help us understand and address the problem of increasing ocean acidification. Each mooring is equipped with surface CO2 systems, using proven and robust technology. The hydrochemistry sampling at the National Reference Stations will also provide total alkalinity data, as will future pH sensors on the moorings, allowing for a complete determination of the carbonate system and pH. Acidification moorings are co-located at three National Reference Stations: * the Yongala NRS in Queensland (replaced in September 2013 after Tropical Cyclone Yasi, and then decommissioned in August 2014); * the Maria Island NRS in Tasmania; and * the Kangaroo Island NRS in South Australia. The Yongala, Wistari and Maria Island acidification moorings are located to characterise changes down the east coast of Australia and the influence of the East Australian Current on CO2 uptake and acidification from the Great Barrier Reef to the Southern Ocean. The Kangaroo Island mooring monitors the deeper waters upwelled on the South Australian shelf which are expected to have higher CO2 and thus could accelerate the exposure of ecosystems to acidification earlier than in other regions. Since 2019, with a change in delivery of the data to the Australian Ocean Data Network (AODN), historical near real-time (NRT) files are no longer available via this collection in the AODN Portal. As a consequence, NRT data from the Yongala mooring (and all other historical files), are only accessible on the THREDDS catalog.",
    "Documentation": "https://catalogue-imos.aodn.org.au/geonetwork/srv/eng/catalog.search#/metadata/4d3d4aca-472e-4616-88a5-df0f5ab401ba",
    "Contact": "info@aodn.org.au",
    "ManagedBy": "AODN",
    "UpdateFrequency": "As Needed",
    "Tags": [
      "oceans",
      "chemistry"
    ],
    "License": "http://creativecommons.org/licenses/by/4.0/",
    "Resources": [
      {
        "Description": "Cloud Optimised AODN dataset of IMOS - National Mooring Network - Acidification Moorings (AM) Sub-Facility - Automatically quality-controlled near real-time data",
        "ARN": "arn:aws:s3:::aodn-cloud-optimised/mooring_acidification_realtime_qc.parquet",
        "Region": "ap-southeast-2",
        "Type": "S3 Bucket"
      }
    ],
    "DataAtWork": {
      "Tutorials": [
        {
          "Title": "Accessing IMOS - National Mooring Network - Acidification Moorings (AM) Sub-Facility - Automatically quality-controlled near real-time data",
          "URL": "https://github.com/aodn/aodn_cloud_optimised/blob/main/notebooks/mooring_acidification_realtime_qc.ipynb",
          "NotebookURL": "https://githubtocolab.com/aodn/aodn_cloud_optimised/blob/main/notebooks/mooring_acidification_realtime_qc.ipynb",
          "AuthorName": "Laurent Besnard",
          "AuthorURL": "https://github.com/aodn/aodn_cloud_optimised"
        },
        {
          "Title": "Accessing and search for any AODN dataset",
          "URL": "https://github.com/aodn/aodn_cloud_optimised/blob/main/notebooks/GetAodnData.ipynb",
          "NotebookURL": "https://githubtocolab.com/aodn/aodn_cloud_optimised/blob/main/notebooks/GetAodnData.ipynb",
          "AuthorName": "Laurent Besnard",
          "AuthorURL": "https://github.com/aodn/aodn_cloud_optimised"
        }
      ]
    },
    "Citation": "The citation in a list of references is: \"IMOS [year-of-data-download], [Title], [data-access-URL], accessed [date-of-access].\""
  },
  "schema_transformation": {
    "drop_variables": [],
    "add_variables": {
      "filename": {
        "source": "@filename",
        "schema": {
          "type": "string",
          "units": "1",
          "long_name": "Filename of the source file"
        }
      },
      "site_code": {
        "source": "@global_attribute:site_code",
        "schema": {
          "type": "string",
          "units": "1",
          "long_name": "site code"
        }
      },
      "timestamp": {
        "source": "@partitioning:time_extent",
        "schema": {
          "type": "int64",
          "units": "1",
          "long_name": "Partition timestamp"
        }
      },
      "polygon": {
        "source": "@partitioning:spatial_extent",
        "schema": {
          "type": "string",
          "units": "1",
          "long_name": "Spatial partition polygon"
        }
      }
    },
    "partitioning": [
      {
        "source_variable": "site_code"
      },
      {
        "source_variable": "timestamp",
        "type": "time_extent",
        "time_extent": {
          "time_varname": "TIME",
          "partition_period": "Y"
        }
      },
      {
        "source_variable": "polygon",
        "type": "spatial_extent",
        "spatial_extent": {
          "lat_varname": "LATITUDE",
          "lon_varname": "LONGITUDE",
          "spatial_resolution": 2
        }
      }
    ],
    "global_attributes": {
      "delete": [
        "geospatial_lat_max",
        "geospatial_lat_min",
        "geospatial_lon_max",
        "geospatial_lon_min",
        "date_created"
      ],
      "set": {
        "title": "IMOS - National Mooring Network - Acidification Moorings (AM) Sub-Facility - realtime mode data"
      }
    }
  }
}
