{
  "dataset_name": "aggregated_seagrass_nonqc",
  "logger_name": "aggregated_seagrass_nonqc",
  "cloud_optimised_format": "parquet",
  "run_settings": {
    "paths": [
      {
        "type": "parquet",
        "partitioning": null,
        "s3_uri": "s3://aodn-processing/stored/datauplift/seagrass/seagrass.parquet"
      }
    ],
    "cluster": {
      "mode": "local",
      "restart_every_path": false
    },
    "clear_existing_data": true,
    "raise_error": false,
    "batch_size": 4,
    "force_previous_parquet_deletion": false
  },
  "metadata_uuid": null,
  "schema": {
    "source": {
      "type": "string",
      "nullable": "False",
      "description": "The source dataset name"
    },
    "source_id": {
      "type": "string",
      "nullable": "False",
      "description": "The source dataset row id"
    },
    "metadata_link": {
      "type": "string",
      "nullable": "False",
      "description": "The source dataset metadata link"
    },
    "start_year": {
      "type": "int16",
      "nullable": "False",
      "description": "The start year of the measurement"
    },
    "start_month": {
      "type": "int8",
      "nullable": "True",
      "description": "The start month of the measurement"
    },
    "start_day": {
      "type": "int8",
      "nullable": "True",
      "description": "The start day of the measurement"
    },
    "end_year": {
      "type": "int16",
      "nullable": "True",
      "description": "The end year of the measurement (if applicable)"
    },
    "end_month": {
      "type": "int8",
      "nullable": "True",
      "description": "The end month of the measurement (if applicable)"
    },
    "end_day": {
      "type": "int8",
      "nullable": "True",
      "description": "The end day of the measurement (if applicable)"
    },
    "geometry": {
      "type": "string",
      "nullable": "False",
      "description": "The WKT encoded geometry of the measurement"
    },
    "lat": {
      "type": "float",
      "nullable": "False",
      "description": "The latitude of the measurement, taken from the centroid of the geometry"
    },
    "lon": {
      "type": "float",
      "nullable": "False",
      "description": "The longitude of the measurement, taken from the centroid of the geometry"
    },
    "h3_cell_15": {
      "type": "string",
      "nullable": "False",
      "description": "The h3 cell corresponding to the measurement"
    },
    "australian_marine_regions_tags": {
      "type": "string",
      "nullable": "True",
      "description": "The australian marine regions tags found applicable to the measurement"
    },
    "present": {
      "type": "bool",
      "nullable": "False",
      "description": "The presence of the species of the measurement"
    },
    "biomass": {
      "type": "float",
      "nullable": "True",
      "description": "The biomass of the species of the measurement (if applicable, most studies only measure presence)",
      "unit": "gdw/m^2"
    },
    "scientific_name": {
      "type": "string",
      "nullable": "False",
      "description": "The scientific name of the measurement, as per WoRMS catalogue"
    },
    "aphia_id": {
      "type": "int64",
      "nullable": "False",
      "description": "The scientific name aphia id of the measurement, as per WoRMS catalogue"
    },
    "rank": {
      "type": "string",
      "nullable": "False",
      "description": "The taxon rank of the measurement, as per WoRMS catalogue"
    },
    "status": {
      "type": "string",
      "nullable": "False",
      "description": "The taxon acceptance of the measurement, as per WoRMS catalogue"
    }
  },
  "aws_opendata_registry": {
    "Name": "FILL UP MANUALLY - CHECK DOCUMENTATION",
    "Description": "FILL UP MANUALLY - CHECK DOCUMENTATION",
    "Documentation": "FILL UP MANUALLY - CHECK DOCUMENTATION",
    "Contact": "FILL UP MANUALLY - CHECK DOCUMENTATION",
    "ManagedBy": "FILL UP MANUALLY - CHECK DOCUMENTATION",
    "UpdateFrequency": "FILL UP MANUALLY - CHECK DOCUMENTATION",
    "Tags": [
      "FILL UP MANUALLY - CHECK DOCUMENTATION"
    ],
    "License": "FILL UP MANUALLY - CHECK DOCUMENTATION",
    "Resources": [
      {
        "Description": "FILL UP MANUALLY - CHECK DOCUMENTATION",
        "ARN": "FILL UP MANUALLY - CHECK DOCUMENTATION",
        "Region": "FILL UP MANUALLY - CHECK DOCUMENTATION",
        "Type": "FILL UP MANUALLY - CHECK DOCUMENTATION",
        "Explore": [
          "FILL UP MANUALLY - CHECK DOCUMENTATION"
        ]
      }
    ],
    "DataAtWork": {
      "Tutorials": [
        {
          "Title": "FILL UP MANUALLY - CHECK DOCUMENTATION",
          "URL": "FILL UP MANUALLY - CHECK DOCUMENTATION",
          "Services": "FILL UP MANUALLY - CHECK DOCUMENTATION",
          "AuthorName": "FILL UP MANUALLY - CHECK DOCUMENTATION",
          "AuthorURL": "FILL UP MANUALLY - CHECK DOCUMENTATION"
        }
      ],
      "Tools & Applications": [
        {
          "Title": "FILL UP MANUALLY - CHECK DOCUMENTATION",
          "URL": "FILL UP MANUALLY - CHECK DOCUMENTATION",
          "AuthorName": "FILL UP MANUALLY - CHECK DOCUMENTATION",
          "AuthorURL": "FILL UP MANUALLY - CHECK DOCUMENTATION"
        }
      ],
      "Publications": [
        {
          "Title": "FILL UP MANUALLY - CHECK DOCUMENTATION",
          "URL": "FILL UP MANUALLY - CHECK DOCUMENTATION",
          "AuthorName": "FILL UP MANUALLY - CHECK DOCUMENTATION"
        }
      ]
    }
  },
  "schema_transformation": {
    "drop_variables": [],
    "add_variables": {
      "filename": {
        "source": "@filename",
        "schema": {
          "type": "string",
          "units": "1",
          "long_name": "Filename of the source file"
        }
      },
      "timestamp": {
        "source": "@function:year_to_datetime",
        "schema": {
          "type": "int64",
          "units": "1",
          "long_name": "Partition timestamp"
        }
      },
      "polygon": {
        "source": "@partitioning:spatial_extent",
        "schema": {
          "type": "string",
          "units": "1",
          "long_name": "Spatial partition polygon"
        }
      }
    },
    "functions": {
      "year_to_datetime": {
        "extract_method": "from_variables",
        "method": {
          "creation_code": "def time_creation_from_variables(df): import pandas; return pandas.to_datetime(df[\"start_year\"],format=\"%Y\")"
        }
      }
    },
    "partitioning": [
      {
        "source_variable": "timestamp",
        "type": "time_extent",
        "time_extent": {
          "time_varname": "timestamp",
          "partition_period": "Y"
        }
      },
      {
        "source_variable": "polygon",
        "type": "spatial_extent",
        "spatial_extent": {
          "lat_varname": "lat",
          "lon_varname": "lon",
          "spatial_resolution": 90
        }
      }
    ]
  }
}
